<!DOCTYPE html>
<html>

<head>
  <title>Drag And Drop Quiz</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="quizResources/bootstrap/css/bootstrap.min.css">
  <link href="quizResources/css/style.css" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
  <script src="quizResources/bootstrap/js/jquery-3.1.0.min.js"></script>
  <script src="quizResources/bootstrap/js/jquery-3.1.1.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.js">
  </script>
  <script src="quizResources/bootstrap/js/bootstrap.min.js"></script>
  <script src="quizResources/js/quiz.js" async=""></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <script src="http://code.jquery.com/jquery-1.12.4.js"></script>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
  <script src="http://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <link rel="stylesheet" href="css/theme.css" type="text/css">
  <link rel="stylesheet" href="css/quiz4.css" type="text/css">
  <script src="quizResources/js/quiz4.js" type="text/javascript"></script>
  <script src="quizResources/js/scroll.js" type="text/javascript"></script>
  <link rel="icon" href="images/icon.ico"> </head>

<body class="self">
  <nav class="navbar navbar-expand-md bg-danger navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">
        <i class="fa d-inline fa-lg fa-rebel"></i>
        <b>&nbsp; DRAG AND DROP</b>
      </a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar2SupportedContent" aria-controls="navbar2SupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse text-center justify-content-end" id="navbar2SupportedContent">
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link text-white" href="index.html">
              <i class="fa d-inline fa-lg fa-home"></i>
              <b>&nbsp; HOME</b>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link text-white" href="quiz.html">
              <i class="fa d-inline fa-lg fa-question"></i>
              <b>&nbsp; BACK TO QUIZ</b>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="py-5 text-white opaque-overlay w-75 m-auto" id="question">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="drag-choice mt-5 p-auto position-fixed">
            <div class="drag-source" id="2">XML</div>
            <div class="drag-source" id="0">Malicious Content</div>
            <div class="drag-source" id="1">Malicious Intent</div>  
          </div>
        </div>
        <div class="col-md-8 p-4 bg-info my-3" id="quest">
          <h1 class="text-danger m-3">DRAG AND DROP QUIZ</h1>
          <div class="drop-targets-container m-auto text-center p-3 w-100">
              1. This kind of injection where in scripts, specially <div class="drop-target"
              id="0">&nbsp;</div>, are executed into web application.<br>
              2. This occurs when data with <div class="drop-target"
              id="1">&nbsp;</div> is sent into an application as a command, query or xml in order to execute unauthorized commands and alter/access data. <br>
              3. This kind of attack takes advantage on making use of external entities which processed by <div class="drop-target"
              id="2">&nbsp;</div> parsers to retrieve contents/files from the system.
            <div class="form-group w-100 text-center">
              <input type="submit" id="submit" value="SUBMIT" class="btn btn-lg btn-danger text-white mx-1 mt-0" onclick="checkAnswers()"> </div>
          </div>
          <br> </div>
      </div>
    </div>
  </div>
  <audio src="audio/force.mp3" autoplay="autoplay"></audio>
  <button onclick="topFunction()" id="myBtn" title="Go to top">
    <i class="fa d-inline fa-lg fa-chevron-circle-up"></i>
  </button>
  <script>
    var score = 0;
    	var checker = new Array();
    	$('.drag-source').draggable(
    		{ snap: '.drop-target' , revert : function(event, ui) {
                $(this).data("uiDraggable").originalPosition = {
                    top : 0,
                    left : 0
                };
                return !event;
            } }	 
    	);
    
    	$('.drop-target').droppable(
    		{ accept: '.drag-source', drop : function(event, ui) {
    			var draggableId = ui.draggable.attr("id");
    			var droppableId = $(this).attr("id");
    			if (draggableId == droppableId) {
    				updateTracker(draggableId, 1);
    			} else {
    				updateTracker(draggableId, 0);
    			}
    		}, out : function(event, ui) {
    			updateTracker(($(this).attr("id")), 0);
    		} }
    	);
    	
    	function updateTracker (index, value) {
    		checker[index] = value;
    		console.log(checker);
    	}
    	
    	function checkAnswers() {
    		for (i = 0; i < checker.length; i++) {
    			if(checker[i] == 1) {
    				score++;
    			}
    		}
    		alert(score);
    		location.reload();
    	}
  </script>

    <script>
    $( document ).ready(function() {
      var setState = function() {
        if(length > yPos && width > xPos){
          //use the fixed sidebar state
          $('#sidebar-fluid').hide();
          $('#sidebar-fixed').show();
        }else{
          //use the fluid sidebar state
          $('#sidebar-fluid').show();
          $('#sidebar-fixed').hide();
        }
      }
      var xPos = 683;
      var yPos = 240;
      var length = $(window).scrollTop();
      var width = $(window).width();
      $( window ).scroll(function (event) {
        length = $(window).scrollTop();
        setState();
      });
      $( window ).resize(function() {
        width = $(window).width();
        setState();
      });
    });
  </script>

</body>

</html>